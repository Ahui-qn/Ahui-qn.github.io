<!DOCTYPE html>
<br lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        textarea,input[type="text"]{ 
            resize: none;
            width: 400px;
        }

    </style>
</head>
<br>
    <br>
        请输入正则表达式: 
        <label for=""><input type="checkbox" onclick="run()"  id="ignoreCase">i </label>
        <label for=""><input type="checkbox" onclick="run()"  id="global">g  </label>
        <label for=""><input type="checkbox" onclick="run()"  id="multi">m  </label>   
        <br> 
        <input type="text" id="regexp" value="foobar" onkeyup="run()"> <br><br>
        请输入测试内容:<br>
        <textarea  id="testcontent" cols="30" rows="10" onkeyup="run()" >daiohfoihafoisaoifgshgshgosh</textarea> 
    </div>

    <script>
        function run() {  
            var regexpSource = regexp.value  // 获取input 输入
            var igmForm = getFlags()  // 获取igm状态
            var reg = new RegExp(regexpSource, igmForm) // 将拿到的输入  构建正则表达式
            console.log(reg)
            var matchTest =  testcontent.value   // 获取测试内容的字符串
            var match
            if (reg.global) { // 如果有g 标志，循环匹配，如果没有，只匹配一次 
                while(match = reg.exec(matchTest)) {
                    console.log(match)
                }
            }else {
                match = reg.exec(matchTest)
                console.log(match)
            }  
        }  
        run()   // 每次加载页面运行一次
        function getFlags () {  // 拿到igm的状态并拼上相应符号
            var flags = ''
            if (ignoreCase.checked) {
                flags += 'i'
            }
            if (global.checked) {
                flags += 'g'
            }
            if (multi.checked) {
                flags += 'm'
            }
            return flags
        }
    </script>

</body>
</html>